{% load static %}

<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ููุดุชุงุฑ | ูุจูุงฺฏ ุดุฎุต</title>
    <link href="{% static 'css/vazirmatn.css' %}" rel="stylesheet">
    <link rel="stylesheet" href="{% static 'css/styles.css' %}">
</head>
<body>
<!-- Header -->
<header class="header">
    <div class="header-main">
        <div class="container">
            <a href="{% url 'index' %}" class="logo">
                <svg width="30" height="30" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5">
                    <path d="M12 20h9"/>
                    <path d="M16.5 3.5a2.121 2.121 0 1 1 3 3L7 19l-4 1 1-4L16.5 3.5z"/>
                </svg>
                ููุดุชุงุฑ<span>.</span>
            </a>
            <nav class="nav">
                <a href="{% url 'index' %}">ุฎุงูู</a>
                <div class="nav-dropdown">
                    <button class="dropdown-toggle">ุฏุณุชูโุจูุฏโูุง <span class="arrow">โพ</span></button>
                    <div class="dropdown-menu">
                        {% for cat in categories %}
                            <a href="{% url 'index' %}?cat={{ cat.name }}">{{ cat.name }}</a>
                        {% endfor %}
                    </div>
                </div>
                <a href="{% url 'about' %}">ุฏุฑุจุงุฑู ูุง</a>
                <a href="{% url 'contact' %}">ุชูุงุณ</a>
            </nav>
            <div class="header-actions">
                <div class="search-box">
                    <input type="text" placeholder="ุฌุณุชุฌู..." id="searchInput">
                    <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <circle cx="11" cy="11" r="8"/>
                        <path d="M21 21l-4.35-4.35"/>
                    </svg>
                </div>
                <button class="theme-toggle" onclick="toggleTheme()" title="ุชุบุฑ ุชู"><span class="theme-icon">๐</span>
                </button>
                {% if not request.user.is_authenticated %}
                    <button class="btn btn-outline btn-sm" onclick="openModal('login')">ูุฑูุฏ</button>
                    <button class="btn btn-primary btn-sm" onclick="openModal('signup')">ุนุถูุช</button>
                {% else %}
                    <div class="nav-dropdown">
                        <button class="dropdown-toggle">๐ค<span class="arrow">โพ</span></button>
                        <div class="dropdown-menu">
                            <div class="post-meta" style="font-size: 18px; padding: 9px 14px;">
                                <span class="author" style="gap: 10px"><img src="

                                        {% if blog_writer.image %}{{ blog_writer.image.url }}{% else %}{% static 'defaults/1.jpg' %}{% endif %}"
                                                                            alt="">{{ blog_writer.full_name }}</span>
                            </div>
                            <a onclick="doLogout()" style="cursor: pointer">โก๏ธ ุฎุฑูุฌ ุงุฒ ุญุณุงุจ ฺฉุงุฑุจุฑ</a>
                        </div>
                    </div>

                {% endif %}
                <button class="mobile-menu-btn" onclick="toggleMobileNav()">โฐ</button>
            </div>
        </div>
    </div>
</header>

{% block content %}
{% endblock %}

<!-- =================== FOOTER =================== -->
<footer class="footer">
    <div class="container">
        <div class="footer-grid">
            <div>
                <div class="logo" style="color: white; margin-bottom: 14px; font-size: 24px;">
                    <svg width="26" height="26" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                         stroke-width="2.5">
                        <path d="M12 20h9"/>
                        <path d="M16.5 3.5a2.121 2.121 0 1 1 3 3L7 19l-4 1 1-4L16.5 3.5z"/>
                    </svg>
                    ููุดุชุงุฑ<span>.</span>
                </div>
                <p>ููุดุชุงุฑ ฺฉ ูุจูุงฺฏ ุดุฎุต ุงุณุช ฺฉู ุฏุฑ ุขู ููุงูุงุช ุชุฎุตุต ุฏุฑ ุญูุฒูโูุง ุชฺฉููููฺุ ุจุฑูุงููโููุณ ู ุณุจฺฉ ุฒูุฏฺฏ ููุชุดุฑ
                    ูโุดูุฏ.</p>
            </div>
            <div>
                <h4>ููฺฉโูุง ููุฏ</h4>
                <ul class="footer-links">
                    <li><a href="{% url 'index' %}">ุฎุงูู</a></li>
                    <li><a href="{% url 'about' %}">ุฏุฑุจุงุฑู ูุง</a></li>
                    <li><a href="{% url 'contact' %}">ุชูุงุณ ุจุง ูุง</a></li>
                </ul>
            </div>
            <div>
                <h4>ุฏุณุชูโุจูุฏโูุง</h4>
                <ul class="footer-links">
                    {% for cat in categories %}
                        <li><a href="{% url 'index' %}?cat={{ cat.name }}">{{ cat.name }}</a></li>
                    {% endfor %}
                </ul>
            </div>
            <div class="footer-newsletter">
                <h4>ุนุถูุช ุฏุฑ ุฎุจุฑูุงูู</h4>{% csrf_token %}
                <p style="font-size:14px; margin-bottom:14px;">ุจุฑุง ุฏุฑุงูุช ุขุฎุฑู ูุทุงูุจุ ุงูู ุฎูุฏ ุฑุง ูุงุฑุฏ ฺฉูุฏ.</p>
                <input type="email" placeholder="ุงูู ุฎูุฏ ุฑุง ูุงุฑุฏ ฺฉูุฏ..." id="footerEmail" name="email" required>
                <button class="btn btn-accent" style="width:100%;" onclick="subscribeNewsletter('footerEmail')">ุนุถูุช
                </button>
            </div>
        </div>
        <div class="footer-bottom">
            <span>ยฉ ฑดฐณ ููุดุชุงุฑ. ุชูุงู ุญููู ูุญููุธ ุงุณุช.</span>
            <span>ุทุฑุงุญ ู ุชูุณุนู ุจุง โค๏ธ ุชูุณุท ููุฏ ูุทู</span>
        </div>
    </div>
</footer>

{% if not request.user.is_authenticated %}
    <!-- Login Modal -->
    <div class="modal-overlay" id="loginModal">
        <div class="modal">
            <button class="modal-close" onclick="closeModal('login')">โ</button>
            <h2>๐ ุฎูุด ุขูุฏุฏ</h2>
            <p class="subtitle">ูุงุฑุฏ ุญุณุงุจ ฺฉุงุฑุจุฑ ุฎูุฏ ุดูุฏ</p>
            <form method="post" action="{% url 'api-v1:login' %}"> {% csrf_token %}
            <div class="form-group"><label>ุงูู</label><input type="text" name="email" id="emailLogin"
                                                                             placeholder="ุงูู ุฎูุฏ ุฑุง ูุงุฑุฏ ฺฉูุฏ">
            </div>
            <div class="form-group"><label>ุฑูุฒ ุนุจูุฑ</label><input type="password" name="password" id="passwordLogin"
                                                                  placeholder="ุฑูุฒ ุนุจูุฑ ุฎูุฏ ุฑุง ูุงุฑุฏ ฺฉูุฏ"></div>
            <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:16px;">
                <div class="checkbox-group"><input type="checkbox" id="remember"><label for="remember"
                                                                                        style="font-size:13px;">ูุฑุง ุจู
                    ุฎุงุทุฑ ุจุณูพุงุฑ</label></div>
                {#                <a href="#" style="font-size:13px; color:var(--primary);">ูุฑุงููุด ุฑูุฒ ุนุจูุฑ</a>#}
            </div>
            <button class="btn btn-primary btn-lg" style="width:100%;" type="button" onclick="doLogin()">ูุฑูุฏ ุจู ุญุณุงุจ</button>
                </form>
            <div class="switch">ุญุณุงุจ ฺฉุงุฑุจุฑ ูุฏุงุฑุฏุ <a onclick="closeModal('login'); openModal('signup');">ุซุจุชโูุงู
                ฺฉูุฏ</a></div>
        </div>
    </div>

    <!-- Signup Modal -->
    <div class="modal-overlay" id="signupModal">
        <div class="modal">
            <button class="modal-close" onclick="closeModal('signup')">โ</button>
            <h2>๐ ุซุจุชโูุงู</h2>
            <p class="subtitle">ฺฉ ุญุณุงุจ ฺฉุงุฑุจุฑ ุฌุฏุฏ ุจุณุงุฒุฏ</p>
            <div class="form-row">
                <div class="form-group"><label>ูุงู</label><input type="text" placeholder="ูุงู" id="nameSignup"></div>
                <div class="form-group"><label>ูุงู ุฎุงููุงุฏฺฏ</label><input type="text" placeholder="ูุงู ุฎุงููุงุฏฺฏ"
                                                                          id="lastnameSignup"></div>
            </div>
            {% csrf_token %}
            <div class="form-group"><label>ุงูู</label><input type="email" placeholder="ุงูู ุฎูุฏ ุฑุง ูุงุฑุฏ ฺฉูุฏ"
                                                               id="emailSignup"></div>
            <div class="form-group"><label>ุฑูุฒ ุนุจูุฑ</label><input type="password" placeholder="ุญุฏุงูู ธ ฺฉุงุฑุงฺฉุชุฑ"
                                                                  id="password1Signup"></div>
            <div class="form-group"><label>ุชฺฉุฑุงุฑ ุฑูุฒ ุนุจูุฑ</label><input type="password" placeholder="ุญุฏุงูู ธ ฺฉุงุฑุงฺฉุชุฑ"
                                                                        id="password2Signup"></div>
            <div class="checkbox-group" style="margin-bottom:16px;"><input type="checkbox" id="terms"><label for="terms"
                                                                                                             style="font-size:13px;">ุจุง
                <a href="#" style="color:var(--primary);">ููุงูู ู ููุฑุฑุงุช</a> ุณุงุช ููุงููู</label></div>
            <button class="btn btn-primary btn-lg" style="width:100%;" onclick="doSignup()">ุงุฌุงุฏ ุญุณุงุจ ฺฉุงุฑุจุฑ</button>
            <div class="switch">ูุจูุงู ุซุจุชโูุงู ฺฉุฑุฏูโุงุฏุ <a onclick="closeModal('signup'); openModal('login');">ูุงุฑุฏ
                ุดูุฏ</a></div>
        </div>
    </div>
{% endif %}

<div class="toast" id="toast"></div>
<button class="back-to-top" id="backToTop" onclick="window.scrollTo({top:0,behavior:'smooth'})">โ</button>


<script src="{% static 'js/jquery-3.7.1.min.js' %}"></script>
<script>
    const BASE_URL = '{{ request.scheme }}://{{ request.get_host }}';
    const ENDPOINTS = {
        newsletter: `${BASE_URL}{% url 'api-v1:newsletter-create' %}`,
        contact: `${BASE_URL}{% url 'contact' %}`,
        signup: `${BASE_URL}{% url 'api-v1:signup' %}`,
        login: `${BASE_URL}{% url 'api-v1:login' %}`,
        logout: `${BASE_URL}{% url 'api-v1:logout' %}`,
        default_comment_avatar: `${BASE_URL}{% static 'defaults/1.jpg' %}`
    }
</script>
<script src="{% static 'js/script.js' %}"></script>
</body>
</html>
